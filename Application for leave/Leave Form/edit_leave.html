<!-- edit_leave_form.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit Leave Application</title>
</head>
<body>

  <h2>Edit Leave Application</h2>

  <form method="POST" action="update_leave.php">
    <input type="hidden" name="employee_id" id="employee_id">
    <input type="hidden" name="leave_id" id="leave_id">

    <div>
      <h3>Personal Details</h3>
      <div id="personalDetailsContainer"></div>
    </div>

    <div>
      <h3>Leave Details</h3>
      <div id="leaveDetailsContainer"></div>
    </div>

    <div>
      <h3>Action Details</h3>
      <div id="actionDetailsContainer"></div>
    </div>

    <div style="margin-top: 20px;">
      <button type="submit">Save Changes</button>
    </div>
  </form>

<script>
  const urlParams = new URLSearchParams(window.location.search);
  const employeeId = urlParams.get('employee_id');
  const leaveId = urlParams.get('leave_id');

  document.getElementById('employee_id').value = employeeId;
  document.getElementById('leave_id').value = leaveId;

  // Load personal details partial HTML and inject it
  fetch(`edit_leave/personal_details/personal_details.html?employee_id=${employeeId}`)
    .then(response => response.text())
    .then(html => {
      document.getElementById('personalDetailsContainer').innerHTML = html;

      // Optionally trigger a script if personal details form has JS behavior
      const script = document.createElement('script');
      script.src = 'edit_leave/personal_details/personalDetails.js'; // only if needed
      document.body.appendChild(script);
    })
    .catch(err => {
      console.error('Failed to load personal details:', err);
      document.getElementById('personalDetailsContainer').innerHTML = '<p>Error loading personal details.</p>';
    });

  // Leave and Action Details â€” load them when ready like above
</script>


</body>
</html>
